(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{13:function(e,t,c){"use strict";var n=c(8),a=c.n(n),r=c(16),s=c(2),o=c(0);t.a=function(){var e=Object(o.useState)(!1),t=Object(s.a)(e,2),c=t[0],n=t[1],l=Object(o.useState)(null),i=Object(s.a)(l,2),d=i[0],u=i[1];return{isLoading:c,error:d,sendRequest:Object(o.useCallback)(function(){var e=Object(r.a)(a.a.mark((function e(t,c,r){var s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),u(null),console.log("started http"),e.prev=3,e.next=6,fetch(t.url,{method:t.method?t.method:"GET",headers:t.headers?t.headers:{},body:t.body?JSON.stringify(t.body):null});case 6:if((s=e.sent).ok){e.next=9;break}throw new Error("Request failed!");case 9:return e.next=11,s.json();case 11:o=e.sent,console.log(o),c(o),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0.message),r&&r();case 20:n(!1);case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,c,n){return e.apply(this,arguments)}}(),[]),setIsLoading:n}}},14:function(e,t,c){"use strict";var n=c(0),a=c.n(n).a.createContext({items:[],totalPrice:0,lastOrder:{},userAddress:{},setUserAddress:function(e){},addItemToCart:function(e){},removeItemFromCart:function(e){},updateItemQuantity:function(e,t){},deleteCartLocal:function(){},fetchCartFromDB:function(){},saveOrder:function(e,t){},deleteUserCart:function(e){}});t.a=a},18:function(e,t,c){"use strict";var n=c(0),a=c.n(n).a.createContext({token:"",userName:"",isLoggedIn:!!localStorage.getItem("token"),openLogin:!0,openSignup:!1,loginUser:function(e){},logoutUser:function(){},signupUser:function(e){},handleOpenLogin:function(){},handleOpenSignup:function(){},checkLogin:function(){},checkPassword:function(e){}});t.a=a},19:function(e,t,c){"use strict";var n=c(0),a=c.n(n).a.createContext({isOpen:!1,modalText:"",handleModalText:function(){},toggleModal:function(){}});t.a=a},22:function(e,t,c){"use strict";var n=c(0),a=c.n(n),r=c(29),s=c.n(r),o=c(1),l=function(){return Object(o.jsx)("div",{className:"".concat(s.a.overlay," bg-green-200 bg-opacity-100 fixed top-0 left-0 w-screen h-screen flex justify-center items-center z-50"),children:Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{className:"text-3xl mt-3 mb-1 md:m-8 md:mt-10 font-semibold text-center",children:"Loading..."}),Object(o.jsx)("div",{className:"".concat(s.a.loader," ").concat(s.a.loader1),children:Object(o.jsx)("div",{children:Object(o.jsx)("div",{children:Object(o.jsx)("div",{children:Object(o.jsx)("div",{children:Object(o.jsx)("div",{children:Object(o.jsx)("div",{})})})})})})})]})})};t.a=a.a.memo(l)},26:function(e,t,c){"use strict";t.a=c.p+"static/media/baobab.74904978.svg"},28:function(e,t,c){e.exports={"centered-box":"Footer_centered-box__1yqCU",heart:"Footer_heart__1T8Et","animate-beat":"Footer_animate-beat__2DX8H",beat:"Footer_beat__3269M"}},29:function(e,t,c){e.exports={overlay:"LoadingOverlay_overlay__3rrf8",loader:"LoadingOverlay_loader__3JzvY",loader1:"LoadingOverlay_loader1__2KW-f",rotate:"LoadingOverlay_rotate__3LgeL",rotate2:"LoadingOverlay_rotate2__34mUX"}},34:function(e,t,c){e.exports={"active-item":"DottedDropdown_active-item__t2wCo"}},35:function(e,t,c){"use strict";t.a=c.p+"static/media/Spinner-5.e9202c75.gif"},38:function(e,t,c){e.exports={"search-button":"StoreSearchbar_search-button__3m3Be"}},44:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(20),s=c.n(r),o=(c(44),c(9)),l=c(4),i=c(2),d=c(3),u=c(7),m=c(26),j=c(18),b=c(14),h=c(15),x=c(1),g=function(){function e(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return t.filter(Boolean).join(" ")}var t=Object(l.g)(),c=Object(n.useContext)(j.a),a=c.logoutUser,r=c.handleOpenLogin,s=Object(n.useState)(""),g=Object(i.a)(s,2),f=g[0],p=g[1],O=[f],v=["Your profile","Your orders","Change password","Sign in"],y=Object(n.useState)({}),w=Object(i.a)(y,2),N=w[0],k=w[1];Object(n.useEffect)((function(){localStorage.getItem("token")&&k(Object(h.a)(localStorage.getItem("token")))}),[]),Object(n.useEffect)((function(){N.name?p("Hi, ".concat(U(N.name),"!")):p("Hi, stranger!")}),[N]);var S=Object(n.useContext)(b.a).items,I=Object(n.useState)(S?S.length:0),C=Object(i.a)(I,2),E=C[0],_=C[1],T=Object(n.useState)(""),P=Object(i.a)(T,2),F=P[0],L=P[1];Object(n.useEffect)((function(){_(S?S.length:0),L("animate-bounce"),setTimeout((function(){L("")}),500)}),[S]);var A=function(){t.push("/signin"),r()},D=function(){a(),t.go(0),p("")},R=function(){t.push("/")},U=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},B=v.map((function(t,c){return"Sign in"===t?Object(x.jsx)(d.c.Item,{children:function(n){var a=n.active;return Object(x.jsx)(o.b,{id:"profile-item-".concat(c+1),onClick:localStorage.getItem("token")?D:A,className:e(a?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer ".concat(localStorage.getItem("token")&&"bg-yellow-200"," rounded-md")),children:localStorage.getItem("token")?"Log out":t})}},"profile-item-".concat(c+1)):"Your profile"===t?localStorage.getItem("token")&&Object(x.jsx)(d.c.Item,{children:function(n){var a=n.active;return Object(x.jsx)(o.b,{to:"/profile",id:"profile-item-".concat(c+1),className:e(a?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"),children:t})}},"profile-item-".concat(c+1)):"Change password"===t?localStorage.getItem("token")&&Object(x.jsx)(d.c.Item,{children:function(n){var a=n.active;return Object(x.jsx)(o.b,{to:"/password",id:"profile-item-".concat(c+1),className:e(a?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"),children:t})}},"profile-item-".concat(c+1)):"Your orders"===t?localStorage.getItem("token")&&Object(x.jsx)(d.c.Item,{children:function(n){var a=n.active;return Object(x.jsx)(o.b,{to:"/orders",id:"profile-item-".concat(c+1),className:e(a?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700 cursor-pointer"),children:t})}},"profile-item-".concat(c+1)):null})),G=v.map((function(t,c){return"Sign in"===t?Object(x.jsx)(d.b.Button,{id:"profile-item-".concat(c+1),className:e("w-full text-left hover:bg-gray-100 block px-4 py-2 text-sm text-gray-700 cursor-pointer bg-yellow-200 rounded-md"),children:Object(x.jsx)(o.b,{to:localStorage.getItem("token")?"/":"/signin",onClick:localStorage.getItem("token")?D:A,children:localStorage.getItem("token")?"Log out":t})},"profile-item-".concat(c+1)):"Your profile"===t?localStorage.getItem("token")&&Object(x.jsx)(d.b.Button,{id:"profile-item-".concat(c+1),className:e("hover:bg-gray-100 block px-4 py-2 text-sm text-gray-700 cursor-pointer"),children:Object(x.jsx)(o.b,{to:"/profile",children:t})}):"Change password"===t?localStorage.getItem("token")&&Object(x.jsx)(d.b.Button,{id:"profile-item-".concat(c+1),className:e("hover:bg-gray-100 block px-4 py-2 text-sm text-gray-700 cursor-pointer"),children:Object(x.jsx)(o.b,{to:"/password",children:t})}):"Your orders"===t?localStorage.getItem("token")&&Object(x.jsx)(d.b.Button,{to:"/orders",id:"profile-item-".concat(c+1),className:e("hover:bg-gray-100 block px-4 py-2 text-sm text-gray-700 cursor-pointer"),children:Object(x.jsx)(o.b,{to:"/orders",children:t})}):null}));return Object(x.jsx)(d.b,{as:"nav",children:function(e){var c=e.open;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("header",{className:"max-w-7xl mx-auto mb-3 md:mb-0 px-4 sm:px-6 lg:px-8",children:Object(x.jsxs)("div",{className:"flex items-center justify-between h-16",children:[Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsx)("div",{className:"flex-shrink-0 out",children:Object(x.jsx)("img",{onClick:R,className:"h-12 w-12 cursor-pointer",src:m.a,alt:"Workflow"})}),Object(x.jsx)("div",{className:"hidden md:block",children:Object(x.jsx)("div",{className:"ml-10 flex items-baseline space-x-4",children:localStorage.getItem("token")&&O.map((function(e,t){return 0===t?Object(x.jsx)(n.Fragment,{children:Object(x.jsx)("p",{className:"bg-green-900 text-white px-3 py-2 rounded-md text-sm font-medium cursor-default",children:e})},e):Object(x.jsx)("p",{className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:e},e)}))})})]}),Object(x.jsx)("div",{className:"hidden md:block",children:Object(x.jsxs)("div",{className:"ml-4 flex items-center md:ml-6",children:[Object(x.jsx)(d.c,{as:"div",className:"ml-3 relative",children:function(e){e.open;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsxs)(d.c.Button,{className:"bg-gray-600 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(x.jsx)("span",{className:"sr-only",children:"View profile"}),Object(x.jsx)(u.h,{onClick:function(){S.length>0&&t.push("/cart")},className:"h-6 w-6","aria-hidden":"true"}),Object(x.jsx)("div",{className:"absolute top-0 right-0 mt-7 -mr-3 px-2 ".concat(F," bg-yellow-500 rounded-full text-sm text-white font-bold"),children:E>0&&E})]})})})}}),Object(x.jsx)(d.c,{as:"div",className:"ml-3 relative",children:function(e){var t=e.open;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsxs)(d.c.Button,{className:"bg-gray-600 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(x.jsx)("span",{className:"sr-only",children:"View profile"}),Object(x.jsx)(u.l,{className:"h-6 w-6","aria-hidden":"true"})]})}),Object(x.jsx)(d.d,{show:t,as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(x.jsx)(d.c.Items,{static:!0,className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 pb-0 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:B})})]})}})]})}),Object(x.jsx)("div",{className:"-mr-2 flex md:hidden",children:Object(x.jsxs)(d.b.Button,{className:"bg-gray-600 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(x.jsx)("span",{className:"sr-only",children:"Open main menu"}),c?Object(x.jsx)(u.m,{className:"block h-6 w-6","aria-hidden":"true"}):Object(x.jsx)(u.f,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),Object(x.jsxs)(d.b.Panel,{className:"md:hidden bg-white mb-5",children:[Object(x.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:O.map((function(e,t){return 0===t?Object(x.jsx)(n.Fragment,{children:Object(x.jsx)("div",{className:"bg-green-800 text-white block px-3 py-2 rounded-md text-base font-medium",children:e})},e):Object(x.jsx)("p",{className:"text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium",children:e},e)}))}),Object(x.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-700",children:[Object(x.jsxs)("div",{className:"flex items-center px-5",children:[N.name&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"flex-shrink-0 bg-gray-600 p-1 rounded-full text-white hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:Object(x.jsx)(u.l,{className:"h-6 w-6","aria-hidden":"true"})}),Object(x.jsxs)("div",{className:"ml-3",children:[Object(x.jsx)("div",{className:"text-base font-medium leading-none text-gray-800",children:"".concat(U(N.name)," ").concat(U(N.surname))}),Object(x.jsx)("div",{className:"text-sm font-medium leading-none text-gray-400",children:N&&N.email})]})]}),Object(x.jsxs)(d.b.Button,{className:"ml-auto bg-gray-600 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(x.jsx)("span",{className:"sr-only",children:"View shopping cart"}),Object(x.jsx)(u.h,{onClick:function(){S.length>0&&t.push("/cart")},className:"h-6 w-6","aria-hidden":"true"})]}),Object(x.jsx)("div",{className:"relative mt-8 -ml-2 -mr-2 px-2 ".concat(F," bg-yellow-500 rounded-full text-sm text-white font-bold"),children:E>0&&E})]}),Object(x.jsx)("div",{className:"mt-3 px-2 space-y-1",show:c,children:G})]})]})]})}})},f=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),c=t[0],a=t[1];return c?Object(x.jsx)("div",{className:"bg-yellow-500",children:Object(x.jsx)("div",{className:"max-w-11xl mx-auto py-1.5 px-3 sm:px-6 lg:px-8 z-10",children:Object(x.jsxs)("div",{className:"flex items-center justify-between flex-wrap",children:[Object(x.jsxs)("div",{className:"w-0 flex-1 flex items-center",children:[Object(x.jsx)("span",{className:"flex p-2 rounded-lg bg-yellow-700",children:Object(x.jsx)(u.i,{className:"h-4 w-4 text-white","aria-hidden":"true"})}),Object(x.jsxs)("p",{className:"ml-3 font-small text-white",children:[Object(x.jsxs)("span",{className:"md:hidden",children:["Click ",Object(x.jsx)("a",{href:"https://github.com/nicolasgasco",target:"blank",classList:"cursor-pointer underline",children:"here"})," for my Github!"]}),Object(x.jsxs)("span",{className:"hidden md:inline",children:["Click ",Object(x.jsx)("a",{href:"https://github.com/nicolasgasco",target:"blank",classList:"cursor-pointer underline",children:"here"})," to see my Github!"]})]})]}),Object(x.jsx)("div",{className:"order-2 flex-shrink-0 sm:order-3 sm:ml-3",children:Object(x.jsxs)("button",{type:"button",onClick:function(){a(!1)},className:"-mr-1 flex p-2 rounded-md hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-white sm:-mr-2",children:[Object(x.jsx)("span",{className:"sr-only",children:"Dismiss"}),Object(x.jsx)(u.m,{className:"h-5 w-5 text-white","aria-hidden":"true"})]})})]})})}):Object(x.jsx)(x.Fragment,{})},p=function(){return Object(x.jsx)(x.Fragment,{children:s.a.createPortal(Object(x.jsx)(f,{}),document.getElementById("overlay-root"))})},O=c(19),v=function(){var e=Object(n.useContext)(O.a),t=e.isOpen,c=e.modalText,a=e.modalBody,r=e.toggleModal,s=Object(n.useState)(t),o=Object(i.a)(s,2),m=o[0],j=o[1],b=Object(n.useState)(c),h=Object(i.a)(b,2),g=h[0],f=h[1],p=Object(n.useState)(a),v=Object(i.a)(p,2),y=v[0],w=v[1],N=Object(n.useRef)(null),k=Object(l.g)(),S=Object(l.h)();Object(n.useEffect)((function(){j(t)}),[t]),Object(n.useEffect)((function(){f(c)}),[c]),Object(n.useEffect)((function(){w(a)}),[a]);var I=function(){r(),console.log(S.pathname),localStorage.getItem("token")&&"/profile"!==S.pathname&&k.push("/")};return Object(x.jsx)(d.d.Root,{show:m,as:n.Fragment,children:Object(x.jsx)(d.a,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:N,open:m,onClose:I,children:Object(x.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(x.jsx)(d.d.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(x.jsx)(d.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(x.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(x.jsx)(d.d.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(x.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(x.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(x.jsxs)("div",{className:"sm:flex sm:items-start",children:[Object(x.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10",children:Object(x.jsx)(u.b,{className:"h-6 w-6 text-yellow-600","aria-hidden":"true"})}),Object(x.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Object(x.jsx)(d.a.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:g}),a&&Object(x.jsx)("ul",{className:"mt-2",children:y.map((function(e){return Object(x.jsx)("li",{className:"ml-5 text-left list-disc text-sm text-gray-500",children:e.replaceAll(".",",")})}))})]})]})}),Object(x.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(x.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-600 text-base font-medium text-white hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:I,children:"Ok"}),Object(x.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:I,ref:N,children:"Cancel"})]})]})})]})})})},y=c(28),w=c.n(y),N=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"bg-gray-200 bg-opacity-60 pb-6 p-0 mt-8 footer-background border-gray-200 border-t-8",children:Object(x.jsxs)("div",{className:"mx-auto container pt-20 lg:pt-30 flex flex-col items-center justify-center",children:[Object(x.jsx)("img",{src:m.a,alt:"Illustration of a baobab",className:"w-32 h-32"}),Object(x.jsxs)("div",{className:"text-black flex flex-col md:items-center f-f-l pt-3",children:[Object(x.jsx)("h1",{className:"text-2xl font-black text-center",children:"Baobab. Shopping. With conscience."}),Object(x.jsxs)("div",{className:"text-md text-color mb-5 mt-5 f-f-l flex justify-center content-baseline",children:[Object(x.jsx)("p",{className:"pr-2",children:"\xa9 Created with "}),Object(x.jsx)("div",{className:w.a["centered-box"],children:Object(x.jsx)("span",{className:"".concat(w.a.heart," ").concat(w.a["animate-beat"]),children:"\ud83d\udc9a"})})," ",Object(x.jsx)("p",{children:"by Nicolas Gasco"})]}),Object(x.jsx)("div",{className:"mt-3 mb-10 text-base text-color f-f-l",children:Object(x.jsxs)("ul",{className:"text-center md:flex items-center",children:[Object(x.jsx)("li",{className:" md:mr-6 cursor-pointer pt-4 lg:py-0",children:"About"}),Object(x.jsx)("li",{className:" md:mr-6 cursor-pointer pt-4 lg:py-0",children:"Features"}),Object(x.jsx)("li",{className:" md:mr-6 cursor-pointer pt-4 lg:py-0",children:"Careers"}),Object(x.jsx)("li",{className:" md:mr-6 cursor-pointer pt-4 lg:py-0",children:"Help"}),Object(x.jsx)("li",{className:"cursor-pointer pt-4 lg:py-0",children:"Privacy Policy"})]})}),Object(x.jsxs)("div",{className:"text-color mb-10 f-f-l text-center text-xs",children:[Object(x.jsx)("p",{children:Object(x.jsx)("a",{href:"https://storyset.com/work",target:"_blank",rel:"noreferrer",children:"Work illustrations by Storyset"})}),Object(x.jsxs)("p",{children:["Icons by"," ",Object(x.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",target:"_blank",rel:"noreferrer",children:"Freepik"})," and "," ",Object(x.jsx)("a",{href:"https://www.flaticon.com/authors/smashicons",title:"Smashicons",target:"_blank",rel:"noreferrer",children:"Smashicons"})," ","from"," ",Object(x.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noreferrer",children:"www.flaticon.com"})]}),Object(x.jsx)("p",{children:Object(x.jsx)("a",{href:"https://www.freepik.com/vectors/background",target:"_blank",rel:"noreferrer",children:"Background vector created by visnezh from www.freepik.com"})}),Object(x.jsx)("a",{href:"https://www.vecteezy.com/free-vector/nature",target:"_blank",rel:"noreferrer",children:"Nature Vectors by Vecteezy"}),Object(x.jsx)("p",{children:Object(x.jsx)("a",{href:"https://codepen.io/clairecodes/pen/wyrJMe",target:"_blank",rel:"noreferrer",children:"Pulsing heart by Claire"})})]})]}),Object(x.jsx)("div",{className:"w-9/12  h-0.5 bg-gray-100 rounded-full"}),Object(x.jsxs)("div",{className:"flex justify-between items-center pt-12",children:[Object(x.jsx)("div",{className:"mr-4",children:Object(x.jsx)("a",{href:"https://github.com/nicolasgasco",target:"_blank",rel:"noreferrer",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",children:Object(x.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})}),Object(x.jsx)("div",{children:Object(x.jsx)("a",{href:"https://www.linkedin.com/in/nicolasgasco/",target:"_blank",rel:"noreferrer",children:Object(x.jsx)("img",{src:"https://res.cloudinary.com/ngasco/image/upload/v1624048194/bonsai_background/linkedin_toeevg.svg",alt:"LinkedIn logo",className:"w-12"})})})]})]})})})},k=c(5),S=c(13),I=c(34),C=c.n(I),E=function(e){var t=e.items,c=e.handleDepartmentFilter,a=e.departmentFilter,r=Object(n.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1];Object(n.useEffect)((function(){c({name:"all"})}),[c]);var d=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},u=function(e){c(e),l(!1)},m=t.map((function(e){return Object(x.jsx)("li",{onClick:function(){return u(e)},className:"cursor-pointer text-gray-600 dark:text-gray-400 dark:hover:bg-gray-700 text-sm leading-3 tracking-normal py-3 hover:bg-green-100 px-3 font-normal ".concat(a.name===e.name&&C.a["active-item"]),children:d(e.name)},"menu-item-".concat(e._id))}));return Object(x.jsx)("div",{className:"mx-auto",children:Object(x.jsx)("div",{className:"container flex justify-center mx-auto",children:Object(x.jsx)("div",{className:"",children:Object(x.jsxs)("div",{className:"relative z-10",children:[Object(x.jsx)("div",{className:"cursor-pointer text-gray-600 dark:text-gray-400",onClick:function(){return l(!o)},children:a?Object(x.jsx)("h4",{className:"text-sm px-2 font-bold",children:d(a.name||"all")}):Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-dots",width:30,height:30,viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(x.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z"}),Object(x.jsx)("circle",{cx:5,cy:12,r:1}),Object(x.jsx)("circle",{cx:12,cy:12,r:1}),Object(x.jsx)("circle",{cx:19,cy:12,r:1})]})}),o&&Object(x.jsxs)("ul",{className:"mt-2 visible transition duration-300 opacity-100 bg-white dark:bg-gray-800 shadow rounded py-1 w-48 absolute",children:[Object(x.jsx)("li",{onClick:function(){return u({name:"all"})},className:"cursor-pointer rounded text-gray-600 dark:text-gray-400 dark:hover:bg-gray-700 text-sm leading-3 tracking-normal py-3 font-bold hover:bg-gray-100 px-3  ".concat("all"===a.name&&C.a["active-item"]),children:"All"},"all"),m]})]})})})})},_=c(38),T=c.n(_),P=function(e){var t=e.onGetSearchbarInput,c=e.handleActivePage,a=e.handleDepartmentFilter,r=e.departmentFilter,s=Object(n.useRef)(),o=Object(n.useState)([]),l=Object(i.a)(o,2),d=l[0],u=l[1],m=Object(n.useState)({}),j=Object(i.a)(m,2),b=(j[0],j[1],Object(S.a)()),h=(b.isLoading,b.setIsLoading,b.sendRequest);Object(n.useEffect)((function(){h({url:"api/departments"},(function(e){u(e.results)}))}),[h]);return Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=s.current.value.trim();t(n),c(1)},className:"bg-white bg-opacity-100 w-11/12 lg:w-1/2 mt-4 pl-2 max-w-full mx-auto flex items-center rounded-full shadow-xl",children:[Object(x.jsx)("div",{className:"p-2 bg-gray-300 text-white rounded-full hover:bg-green-400 focus:outline-none w-20 h-10",children:Object(x.jsx)(E,{items:d,departmentFilter:r,handleDepartmentFilter:a})}),Object(x.jsx)("input",{className:"rounded-l-full bg-transparent w-full py-4 px-6 text-gray-700 placeholder-gray-700 text-center leading-tight focus:outline-none tracking-wider text-lg",id:"search",type:"text",placeholder:"Search...",ref:s}),Object(x.jsx)("div",{className:"p-2",children:Object(x.jsx)("button",{className:"".concat(T.a["search-button"]," bg-green-500 text-white rounded-full p-2 hover:bg-green-400 focus:outline-none w-10 h-10 flex items-center justify-center")})})]})},F=a.a.memo(P),L=[{name:"Conscious products",description:"Our products out hand-picked among the best companies offering the best environmentally and socially products on the market.",icon:u.g},{name:"Carbon offset",description:"For every order we receive, we offset 50% of the carbon footprint. You can choose to add the remaining 50%.",icon:u.c},{name:"Fast and sustainable shipping",description:"We partner with sustainable shipping companies to provide a shipping service which is both good for the environment and as fast a lightning",icon:u.e},{name:"Ethical employer",description:"All our workers enjoy the best working conditions we can possibly offer them, both in the offices and warehouses.",icon:u.d}];function A(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"lg:text-center",children:[Object(x.jsx)("h2",{className:"text-base text-green-600 font-bold tracking-wide uppercase",children:"Green, convenient, sustainable"}),Object(x.jsx)("h1",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"Start shopping on Baobab"}),Object(x.jsx)("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto"})]}),Object(x.jsx)("div",{className:"mt-10",children:Object(x.jsx)("dl",{className:"space-y-10 md:space-y-0 md:grid md:grid-cols-2 md:gap-x-8 md:gap-y-10",children:L.map((function(e){return Object(x.jsxs)("div",{className:"relative",children:[Object(x.jsxs)("dt",{children:[Object(x.jsx)("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-md bg-yellow-500 text-white",children:Object(x.jsx)(e.icon,{className:"h-6 w-6","aria-hidden":"true"})}),Object(x.jsx)("p",{className:"ml-16 text-lg leading-6 font-medium text-gray-900",children:e.name})]}),Object(x.jsx)("dd",{className:"mt-2 ml-16 text-base text-gray-500",children:e.description})]},e.name)}))})})]})}var D=function(e){return Object(x.jsx)("section",{className:"flex justify-center",children:Object(x.jsx)("div",{className:'w-full md:w-10/12 sm:max-w-2xl md:max-w-7xl xl:max-w-6xl py-6 md:py-12 px-3 lg:px-12 my-8 mx-2 md:mx-10 lg:mx-36  rounded-xl shadow-xl bg-white min-h-full" +\n    '.concat(e.className),children:e.children})})},R=c(35),U=c(22),B=function(e){var t=e.product,c=e.picturesLoading,a=e.classes,r=e.short,s=Object(n.useState)("Loading..."),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(n.useContext)(b.a).addItemToCart,m=Object(n.useState)(""),j=Object(i.a)(m,2),h=j[0],g=j[1],f=Object(S.a)(),p=f.isLoading,O=f.setIsLoading,v=f.sendRequest;Object(n.useEffect)((function(){v({url:"api/departments"},(function(e){d(e.results[0].translations.en_us)}))}),[v]);var y=Object(x.jsx)("img",{src:t.pictures[0].url,alt:t.pictures[0].alt,className:"w-full object-contain h-full object-center rounded-lg"});return c&&(y=Object(x.jsx)("img",{src:R.a,alt:"Loading animation",className:"w-1/3 mx-auto p-5 object-cover object-center rounded-lg"})),Object(x.jsxs)(x.Fragment,{children:[p&&Object(x.jsx)(U.a,{}),Object(x.jsx)("div",{className:"".concat(a||"pb-10 md:px-4 sm:w-1/2 xl:w-1/3 px-2","\n        "),children:Object(x.jsxs)("div",{className:"h-full",children:[Object(x.jsx)("div",{className:"bg-white p-0 rounded-lg shadow-md",children:y}),Object(x.jsx)("div",{className:"relative px-1 -mt-6",children:Object(x.jsxs)("div",{className:"bg-yellow-200 p-4 rounded-lg shadow-xl",children:[Object(x.jsx)("div",{className:"flex items-baseline",children:Object(x.jsx)("span",{className:"bg-teal-200 text-teal-800 text-xs px-2 inline-block rounded-full  uppercase font-semibold tracking-wide",children:l})}),Object(x.jsx)("h3",{className:"mt-2 text-xl font-semibold leading-tight mb-2",children:"".concat(t.completeName.brand," ").concat(t.completeName.productName,", ").concat(t.completeName.shortDesc,", ").concat(t.completeName.productDesc1,", ").concat(t.completeName.productDesc2,", ").concat(t.completeName.productDesc3,", ").concat(t.completeName.color)}),Object(x.jsxs)("div",{className:"mt-2 text-3xl",children:[Number.parseInt(t.pricingInfo.price),".",Object(x.jsx)("span",{className:"text-xl",children:(100*(t.pricingInfo.price-Math.floor(t.pricingInfo.price))).toFixed(0)}),Object(x.jsx)("p",{className:"inline text-2xl",children:" \u20ac"})]}),!r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"mt-4",children:[Object(x.jsx)("span",{className:"text-teal-600 text-md font-semibold",children:"FROM:"}),Object(x.jsx)("span",{className:"text-sm text-gray-600",children:" ".concat(t.ecoInfo.originCountryCode)})]}),Object(x.jsxs)("div",{className:"mt-1",children:[Object(x.jsx)("span",{className:"text-teal-600 text-md font-semibold uppercase",children:"Made in:"}),Object(x.jsx)("span",{className:"text-sm text-gray-600",children:" ".concat(t.ecoInfo.productionCountryCode)})]}),Object(x.jsxs)("div",{className:"mt-4",children:[Object(x.jsx)("span",{className:"text-teal-600 text-md font-semibold uppercase",children:"Social:"}),Object(x.jsx)("span",{className:"text-sm text-gray-600",children:" ".concat(t.ecoInfo.socialMission)})]}),Object(x.jsxs)("div",{className:"mt-1",children:[Object(x.jsx)("span",{className:"text-teal-600 text-md font-semibold uppercase",children:"Environment:"}),Object(x.jsx)("span",{className:"text-sm text-gray-600",children:" ".concat(t.ecoInfo.environmentMission)})]})]}),Object(x.jsx)("div",{className:"w-full flex justify-center",children:Object(x.jsx)("button",{onClick:function(){var e;e=t,console.log("loading"),O(!0),u(e),g("animate-ping"),O(!1),console.log("finished"),g("")},value:t._id,className:"px-6 py-2 mt-4 transition ease-in duration-200 uppercase rounded-full hover:bg-green-500 hover:text-white ".concat(h," hover:bold border-2 border-green-900 focus:outline-none"),children:"Buy"})})]})})]})},"product-".concat(t._id))]})},G=function(){var e=Object(n.useState)(["","",""]),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(S.a)().sendRequest;Object(n.useEffect)((function(){r({url:"/api/products/?pageSize=3&pageNum=1&sortBy=creationDate&order=-1"},(function(e){if(3!==e.resultsFound)throw new Error("Found less than three results");a(e.results)}))}),[r]);var s=c.map((function(e,t){return t<3?e&&Object(x.jsx)(B,{short:!0,classes:"mx-auto max-w-md w-full md:w-1/2 xl:w-1/3 py-4 lg:py-0  px-2 flex flex-col justify-center",product:e}):null}));return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{className:"-mt-4 mb-8 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl text-center",children:"Our latest arrivals"}),Object(x.jsx)("div",{className:"flex items-center",children:Object(x.jsx)("div",{className:"w-full",children:Object(x.jsx)("div",{className:"flex flex-col md:flex-row",children:s})})})]})},z=a.a.lazy((function(){return c.e(12).then(c.bind(null,69))})),M=a.a.lazy((function(){return c.e(11).then(c.bind(null,63))})),J=a.a.lazy((function(){return c.e(9).then(c.bind(null,70))})),Y=a.a.lazy((function(){return c.e(4).then(c.bind(null,64))})),q=a.a.lazy((function(){return c.e(5).then(c.bind(null,65))})),H=a.a.lazy((function(){return Promise.all([c.e(0),c.e(10)]).then(c.bind(null,68))})),W=a.a.lazy((function(){return c.e(6).then(c.bind(null,66))})),K=a.a.lazy((function(){return Promise.all([c.e(0),c.e(8),c.e(7)]).then(c.bind(null,67))})),V={showResultsBox:!1,contentLoading:!1,picturesLoading:!1,isEmpty:!1,activePage:1,paginationData:{},searchKeywords:"",resultsPerPage:6,fetchedProducts:[],showAuth:!1,departmentFilter:{name:"all"},sortingFilter:""},X=function(e,t){switch(t.type){case"CONTENT_LOADING":return Object(k.a)(Object(k.a)({},e),{},{contentLoading:t.val});case"PICTURES_LOADING":return Object(k.a)(Object(k.a)({},e),{},{picturesLoading:t.val});case"IS_EMPTY":return Object(k.a)(Object(k.a)({},e),{},{isEmpty:t.val});case"ACTIVE_PAGE":return Object(k.a)(Object(k.a)({},e),{},{activePage:t.val});case"PAGINATION_DATA":return Object(k.a)(Object(k.a)({},e),{},{paginationData:t.val});case"SEARCH_KEYWORDS":return Object(k.a)(Object(k.a)({},e),{},{searchKeywords:t.val});case"RESULTS_PAGE":return Object(k.a)(Object(k.a)({},e),{},{resultsPerPage:t.val});case"FETCHED_PRODUCTS":return Object(k.a)(Object(k.a)({},e),{},{fetchedProducts:t.val});case"SHOW_AUTH":return Object(k.a)(Object(k.a)({},e),{},{showAuth:!e});case"DEPARTMENT_FILTER":return Object(k.a)(Object(k.a)({},e),{},{departmentFilter:t.val});case"SORTING_FILTER":return Object(k.a)(Object(k.a)({},e),{},{sortingFilter:t.val});default:return V}},Q=function(){var e=Object(n.useReducer)(X,V),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useContext)(j.a).checkLogin,s=Object(l.g)(),o=Object(S.a)().sendRequest,d=Object(n.useCallback)((function(e){s.push("/search"),a({type:"CONTENT_LOADING",val:!0}),a({type:"PICTURES_LOADING",val:!0}),a({type:"IS_EMPTY",val:!1}),a({type:"FETCHED_PRODUCTS",val:[]}),a({type:"SEARCH_KEYWORDS",val:e}),console.log("Fetching products...");o({url:"api/products/search/?pageNum=".concat(c.activePage.toString(),"&pageSize=").concat(c.resultsPerPage.toString()).concat("all"!==c.departmentFilter.name?"&department=".concat(c.departmentFilter._id||""):"").concat(c.sortingFilter?"&sortBy=".concat(c.sortingFilter):""),method:"POST",headers:{"Content-Type":"application/json"},body:{keywords:e}},(function(e){0===e.results.length?(a({type:"IS_EMPTY",val:!0}),a({type:"PICTURES_LOADING",val:!1}),a({type:"CONTENT_LOADING",val:!1})):(a({type:"FETCHED_PRODUCTS",val:e.results}),a({type:"PAGINATION_DATA",val:{productsFound:e.productsFound,pageNumber:e.pageNumber,pageSize:e.pageSize,totalProducts:e.totalProducts,totalPages:e.totalPages}}),a({type:"PICTURES_LOADING",val:!1}),setTimeout((function(){a({type:"CONTENT_LOADING",val:!1})}),1e3),a({type:"IS_EMPTY",val:!1}))}),(function(){a({type:"IS_EMPTY",val:!0}),a({type:"PICTURES_LOADING",val:!1}),a({type:"CONTENT_LOADING",val:!1})}))}),[c.activePage,c.resultsPerPage,s,o,c.departmentFilter,c.sortingFilter]),u=Object(n.useCallback)((function(e){a({type:"ACTIVE_PAGE",val:e})}),[a]),m=Object(n.useCallback)((function(e){u(e.target.value)}),[u]),b=Object(n.useCallback)((function(e){1!==c.activePage&&a({type:"ACTIVE_PAGE",val:1}),a({type:"RESULTS_PAGE",val:e})}),[c.activePage]),h=Object(n.useCallback)((function(e){e.name&&a({type:"DEPARTMENT_FILTER",val:e})}),[]),g=Object(n.useCallback)((function(e){console.log("VALUEEE",e),a({type:"SORTING_FILTER",val:e}),a({type:"SEARCH_KEYWORDS",val:""})}),[]);Object(n.useEffect)((function(){""!==c.searchKeywords&&d(c.searchKeywords)}),[c.resultsPerPage,c.searchKeywords,c.activePage,d]),Object(n.useEffect)((function(){console.log("No products fetched"),0===c.fetchedProducts.length&&s.push("/")}),[]),Object(n.useEffect)((function(){r()}),[r]);var f,p=function(){localStorage.getItem("token")||(s.push("/"),s.go(0))};switch(Object(l.h)().pathname){case"/search":f=[Object(x.jsx)(K,{fetchedProducts:c.fetchedProducts,paginationData:c.paginationData,handlePageChange:m,handleResultsPerPage:b,contentLoading:c.contentLoading,picturesLoading:c.picturesLoading,isEmpty:c.isEmpty,handleSortingFilter:g})];break;case"/signin":f=[Object(x.jsx)(H,{})];break;case"/profile":p(),f=[Object(x.jsx)(z,{})];break;case"/password":p(),f=[Object(x.jsx)(M,{})];break;case"/cart":f=[Object(x.jsx)(J,{})];break;case"/checkout":p(),f=[Object(x.jsx)(Y,{})];break;case"/success":p(),f=[Object(x.jsx)(q,{})];break;case"/orders":p(),f=[Object(x.jsx)(W,{})];break;case"/":f=[Object(x.jsx)(A,{}),Object(x.jsx)(G,{})]}return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(F,{handleDepartmentFilter:h,departmentFilter:c.departmentFilter,onGetSearchbarInput:d,handleActivePage:u,activePage:c.activePage}),f.map((function(e){return Object(x.jsx)(n.Suspense,{fallback:Object(x.jsx)(U.a,{}),children:Object(x.jsx)(D,{children:e})})}))]})},Z=c(39),$=c(36),ee=Object(Z.a)("pk_test_51J3L3sID7BWQ1tRhAZSV4MKb1ZUS23HKoXXF3R1zdKj2kbjh03UQqvfFgSVDWakLvATspzNOBELpa7k41w6OYa2C00PDmPXqgR"),te=function(){return Object(x.jsx)(o.a,{children:Object(x.jsxs)($.Elements,{stripe:ee,children:[Object(x.jsx)(p,{}),Object(x.jsx)(v,{}),Object(x.jsx)(g,{}),Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{exact:!0,path:"/",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/search",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/signin",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/profile",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/password",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/cart",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/checkout",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/success",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{exact:!0,path:"/orders",children:Object(x.jsx)("div",{className:"min-h-screen",children:Object(x.jsx)(Q,{})})}),Object(x.jsx)(l.b,{path:"*",children:Object(x.jsx)(l.a,{to:"/"})})]}),Object(x.jsx)(N,{})]})})},ce=c(25),ne=function(e){var t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!!localStorage.getItem("token")),o=Object(i.a)(s,2),d=o[0],u=o[1],m=Object(n.useState)(!0),g=Object(i.a)(m,2),f=g[0],p=g[1],v=Object(n.useState)(!1),y=Object(i.a)(v,2),w=y[0],N=y[1],k="",S=Object(n.useContext)(O.a).handleModalText,I=Object(n.useContext)(b.a),C=I.deleteCartLocal,E=I.fetchCartFromDB,_=Object(l.g)(),T=function(e){console.log(e),console.log("login"),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t,c,n,a=Object(ce.a)(e.headers);try{for(a.s();!(n=a.n()).done;){var s=n.value;"x-auth-token"===s[0]&&(c=s[1],t=Object(h.a)(s[1]),r(t))}}catch(o){a.e(o)}finally{a.f()}return c&&(k="".concat(t.name.charAt(0).toUpperCase()+t.name.substring(1)," ").concat(t.surname.charAt(0).toUpperCase()+t.surname.substring(1))),localStorage.setItem("token",c),localStorage.removeItem("cart"),e.json()})).then((function(e){if(!e.success)throw new Error(e.msg);console.log("success"),E(),S("Welcome, ".concat(k,"!"))})).catch((function(e){localStorage.removeItem("token"),console.log("An error ocurred: "+e.message),e.message.includes("token <")?S("Something went wrong!"):S("".concat(e.message,"!")),k=""}))},P=Object(n.useCallback)((function(){console.log("check"),fetch("/api/check").then((function(e){var t,c=Object(ce.a)(e.headers);try{for(c.s();!(t=c.n()).done;){var n=t.value;"x-auth-token"===n[0]&&console.log(n[1])}}catch(a){c.e(a)}finally{c.f()}return e.json()})).then((function(e){if(e.error)throw new Error(e.error);e.session||(localStorage.removeItem("token"),r("")),console.log(e)})).catch((function(e){console.log("An error ocurred: "+e.message)}))}),[]);Object(n.useEffect)((function(){r(localStorage.getItem("token")),u(!!localStorage.getItem("token"))}),[a]);var F={token:a,userName:k,isLogged:d,openLogin:f,openSignup:w,loginUser:T,signupUser:function(e){console.log("signin"),fetch("/api/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t,c=Object(ce.a)(e.headers);try{for(c.s();!(t=c.n()).done;){var n=t.value;"x-auth-token"===n[0]&&console.log(n[1])}}catch(a){c.e(a)}finally{c.f()}return e.json()})).then((function(t){if(t.error)throw new Error(t.error);T({email:e.email,password:e.password})})).catch((function(e){console.log(e.message),e.message.includes("Joi")?S("Something went wrong","".concat(e.message.split("(Joi):")[1].replaceAll(",",".\n").split(".\n"))):e.message.includes("not unique")&&S("Something went wrong","".concat(e.message.split("email:")[1].replaceAll(",",".\n").split(".\n"))),console.log("An error ocurred: "+e.message)}))},logoutUser:function(){console.log("logout"),fetch("/api/logout",{method:"DELETE"}).then((function(e){var t,c=Object(ce.a)(e.headers);try{for(c.s();!(t=c.n()).done;){var n=t.value;"x-auth-token"===n[0]&&console.log(n[1])}}catch(a){c.e(a)}finally{c.f()}return e.json()})).then((function(e){if(e.error)throw new Error(e.error);console.log("Logout successful"),localStorage.removeItem("token"),k="",C(),_.push("/"),_.go(0)})).catch((function(e){console.log("An error ocurred: "+e.message)}))},handleOpenLogin:function(){p(!0),N(!1)},handleOpenSignup:function(){p(!1),N(!0)},checkLogin:P,checkPassword:function(e,t){return new Promise((function(t,c){console.log(e),console.log("login"),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(!e.success)throw new Error(e.msg);console.log("success"),t("Right password")})).catch((function(e){console.log("fail"),c(Error("Wrong password"))}))}))}};return Object(x.jsx)(j.a.Provider,{value:F,children:e.children})},ae=function(e){var t=Object(n.useState)(!1),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)([]),m=Object(i.a)(u,2),j=m[0],b=m[1],h=function(){r((function(e){return!e}))},g={isOpen:a,modalText:l,modalBody:j,handleModalText:function(e,t){d(e.charAt(0).toUpperCase()+e.slice(1)),t?Array.isArray(t)?b(t.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}))):b([t.charAt(0).toUpperCase()+t.slice(1)]):b([]),h()},toggleModal:h};return Object(x.jsx)(O.a.Provider,{value:g,children:e.children})},re=c(27),se=c(8),oe=c.n(se),le=c(16),ie=function(e){var t=Object(n.useState)(0),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)([]),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)({}),m=Object(i.a)(u,2),j=m[0],g=m[1],f=Object(n.useState)({}),p=Object(i.a)(f,2),O=p[0],v=p[1],y=function(){var e=Object(le.a)(oe.a.mark((function e(){var t,c,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetchin items"),!localStorage.getItem("token")){e.next=12;break}return t=Object(h.a)(localStorage.getItem("token"))._id,e.next=5,fetch("/api/cart/".concat(t));case 5:return c=e.sent,e.next=8,c.json();case 8:(n=e.sent).results?(console.log("items fetched"),d(n.results)):(console.log("items empty"),d([])),e.next=13;break;case 12:localStorage.getItem("cart")&&d(JSON.parse(localStorage.getItem("cart")));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){localStorage.getItem("token")&&y()}),[]);var w=function(){var e=Object(le.a)(oe.a.mark((function e(t){var c,n,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Adding item to cart"),t.quantity=1,!localStorage.getItem("token")){e.next=25;break}return e.prev=3,console.log("posting cart"),console.log("merda",t),e.next=8,fetch("/api/cart/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Object(h.a)(localStorage.getItem("token"))._id,cartItem:t})});case 8:return c=e.sent,e.next=11,c.json();case 11:if(n=e.sent,console.log("data",n),1!==n.insertedCount){e.next=16;break}e.next=17;break;case 16:throw new Error("Something went wrong");case 17:d((function(e){d([].concat(Object(re.a)(e),[t]))})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),console.log(e.t0.message);case 23:e.next=27;break;case 25:localStorage.getItem("cart")?(0===(a=JSON.parse(localStorage.getItem("cart"))).filter((function(e){return e._id==t._id})).length&&a.push(t),localStorage.setItem("cart",JSON.stringify(a))):localStorage.setItem("cart",JSON.stringify([t])),d((function(e){d([].concat(Object(re.a)(e),[t]))}));case 27:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(l.length>0){var e=l.reduce((function(e,t){return e+t.pricingInfo.price*t.quantity}),0);r(e)}}),[l]);var N=function(){var e=Object(le.a)(oe.a.mark((function e(t){var c,n,a,r,s;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=24;break}return e.prev=1,c=Object(h.a)(localStorage.getItem("token"))._id,console.log("deleting cart"),e.next=6,fetch("/api/cart/",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c,cartItemId:t})});case 6:return n=e.sent,e.next=9,n.json();case 9:if(a=e.sent,console.log(a),1!==a.deletedCount){e.next=16;break}console.log("item deleted"),d((function(e){1===e.length?d([]):d(e.filter((function(e){return e._id!==t})))})),e.next=17;break;case 16:throw new Error("Item wasn't deleted");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0.message);case 22:e.next=25;break;case 24:localStorage.getItem("cart")&&(r=JSON.parse(localStorage.getItem("cart")),s=r.filter((function(e){return e._id!==t})),localStorage.setItem("cart",JSON.stringify(s)),d((function(e){1===e.length?d([]):d(e.filter((function(e){return e._id!==t})))})));case 25:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){console.log("Delete all"),d([])},S=function(){var e=Object(le.a)(oe.a.mark((function e(t,c){var n,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/order/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:c,userAddress:O})});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,I(t),g(a.result),console.log("Order saved"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,c){return e.apply(this,arguments)}}(),I=function(){var e=Object(le.a)(oe.a.mark((function e(t){var c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting user cart"),e.prev=1,e.next=4,fetch("/api/cart/whole/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 4:return c=e.sent,e.next=7,c.json();case 7:if(!e.sent.deletedCount){e.next=13;break}console.log("Cart deleted"),k(),e.next=14;break;case 13:throw new Error("It wasn't possible to delete the cart");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),C={items:l,totalPrice:a,lastOrder:j,userAddress:O,setUserAddress:v,addItemToCart:w,removeItemFromCart:N,updateItemQuantity:function(e,t){console.log(e,t,"ciao"),d((function(c){var n=Object(re.a)(c),a=n.findIndex((function(t){return t._id===e}));n[a].quantity=t,d(n),r((function(e){r(e+n[a].pricingInfo.price*n[a].quantity)}))}))},deleteCartLocal:k,fetchCartFromDB:y,saveOrder:S,deleteUserCart:I};return Object(x.jsx)(b.a.Provider,{value:C,children:e.children})};s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(ae,{children:Object(x.jsx)(ie,{children:Object(x.jsx)(ne,{children:Object(x.jsx)(te,{})})})})}),document.getElementById("root"))}},[[55,2,3]]]);
//# sourceMappingURL=main.514f433a.chunk.js.map
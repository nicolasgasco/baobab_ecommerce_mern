{"version":3,"sources":["components/Cart/CartTable.js","components/Cart/ShoppingCart.js"],"names":["CartTable","useContext","CartContext","items","removeItemFromCart","updateItemQuantity","useState","cartItems","setCartItems","isLoading","setIsLoading","useEffect","length","changeItemQuantity","event","target","id","value","showCartItems","map","item","className","src","pictures","url","alt","completeName","brand","productName","color","productGender","_id","onClick","aria-hidden","type","defaultValue","quantity","min","max","onChange","pricingInfo","price","String","fromCharCode","toFixed","LoadingOverlay","ShoppingCart","showShippingInfo","totalPrice","setUserAddress","userData","setUserData","fetchUser","useHttp","sendRequest","a","localStorage","getItem","handleUserFound","user","resultsFound","Error","result","jwt_decode","fetchUserData","address","name","surname","street","zip","province","city","to","NothingFound","data-prefix","data-icon","xmlns","viewBox","fill","d"],"mappings":"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","file":"static/js/6.9985765c.chunk.js","sourcesContent":["import { TrashIcon } from \"@heroicons/react/outline\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport LoadingOverlay from \"../UI/LoadingOverlay\";\r\n\r\nimport CartContext from \"../../store/cart-context\";\r\n\r\nconst CartTable = () => {\r\n  const { items, removeItemFromCart, updateItemQuantity } =\r\n    useContext(CartContext);\r\n\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isLoading) setIsLoading(false);\r\n    // It works better without adding isLoading as dependency\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    if (items.length !== 0) {\r\n      setCartItems(items);\r\n    }\r\n  }, [items]);\r\n\r\n  const removeItem = (id) => {\r\n    setIsLoading(true);\r\n    removeItemFromCart(id);\r\n    // Otherwise not working for last item\r\n    if (cartItems.length === 1) setCartItems([]);\r\n  };\r\n\r\n  const changeItemQuantity = (event) => {\r\n    updateItemQuantity(event.target.id, event.target.value);\r\n  };\r\n\r\n  const showCartItems = cartItems.map((item) => {\r\n    return (\r\n      <tr\r\n        className=\"h-24 border-gray-300 dark:border-gray-200 border-b\"\r\n        key={`row-${item._id}`}\r\n      >\r\n        <td className=\"hidden py-4 md:table-cell text-sm whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4\">\r\n          <img\r\n            src={item.pictures[0].url}\r\n            className=\"w-full mx-auto object-contain rounded-sm ring-2 ring-green-500\"\r\n            alt={item.pictures[0].alt}\r\n          />\r\n        </td>\r\n        <td className=\"text-sm whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4\">\r\n          <p className=\"mb-2 md:ml-4\">{`${item.completeName.brand} ${item.completeName.productName}, ${item.completeName.color}, ${item.completeName.productGender}`}</p>\r\n        </td>\r\n        <td className=\"text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4\">\r\n          <div className=\"cursor-pointer\">\r\n            <span className=\"sr-only\">Remove item</span>\r\n            <TrashIcon\r\n              id={`cart-item-${item._id}`}\r\n              onClick={() => {\r\n                removeItem(item._id);\r\n              }}\r\n              className=\"h-6 w-6 ml-4 mt-1\"\r\n              aria-hidden=\"true\"\r\n            />\r\n          </div>\r\n        </td>\r\n        <td className=\"text-center  text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4\">\r\n          <div className=\"relative flex flex-row w-12 h-8\">\r\n            <input\r\n              id={item._id}\r\n              type=\"number\"\r\n              defaultValue={item.quantity}\r\n              min={1}\r\n              max={9}\r\n              onChange={changeItemQuantity}\r\n              className=\"w-full font-semibold text-center text-gray-700 bg-yellow-200 rounded-md outline-none focus:outline-none hover:text-black focus:text-black\"\r\n            />\r\n          </div>\r\n        </td>\r\n        <td className=\"pr-4 whitespace-no-wrap  hidden md:table-cell\">\r\n          <div className=\"text-center\">\r\n            <span className=\"text-xs lg:text-base font-medium\">{`${\r\n              item.pricingInfo.price\r\n            }${String.fromCharCode(160)}€`}</span>\r\n          </div>\r\n        </td>\r\n        <td className=\"text-center text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4\">\r\n          <span className=\"text-sm lg:text-base font-medium\">{`${(\r\n            item.pricingInfo.price * item.quantity\r\n          ).toFixed(2)}${String.fromCharCode(160)}€`}</span>\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {isLoading && <LoadingOverlay />}\r\n\r\n      <div className=\"w-full\">\r\n        <table className=\"min-w-full overflow-x-auto \">\r\n          <thead>\r\n            <tr className=\"w-full h-16 border-gray-300 dark:border-gray-200 border-b py-8\">\r\n              <th className=\"w-2/12 hidden md:table-cell text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4\"></th>\r\n              <th className=\"w-5/12  text-center text-gray-600 dark:text-gray-400 font-bold pr-6 text-sm tracking-normal leading-4\">\r\n                Product\r\n              </th>\r\n              <th className=\"w-1/12  text-center text-gray-600 dark:text-gray-400 font-bold pr-6 text-sm tracking-normal leading-4\"></th>\r\n              <th className=\"w-1/12  text-center text-gray-600 dark:text-gray-400 font-bold pr-6 text-sm tracking-normal leading-4\">\r\n                Quantity\r\n              </th>\r\n              <th className=\"w-1/12   hidden md:table-cell text-center text-gray-600 dark:text-gray-400 font-bold pr-6 text-sm tracking-normal leading-4\">\r\n                Unit\r\n              </th>\r\n              <th className=\"w-2/12  text-center text-gray-600 dark:text-gray-400 font-bold pr-8 text-sm tracking-normal leading-4\">\r\n                Total\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{showCartItems}</tbody>\r\n        </table>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default CartTable;\r\n","import { useContext, useEffect, useState } from \"react\";\r\n\r\nimport CartContext from \"../../store/cart-context\";\r\nimport NothingFound from \"../../components/MainContent/Results/NothingFound\";\r\n\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CartTable from \"./CartTable\";\r\nimport useHttp from \"../../hooks/use-http\";\r\n\r\nconst ShoppingCart = () => {\r\n  const { items, totalPrice, setUserAddress } = useContext(CartContext);\r\n\r\n  const [userData, setUserData] = useState({});\r\n\r\n  const { sendRequest: fetchUser } = useHttp();\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      // Fetching userData from database\r\n      if (localStorage.getItem(\"token\")) {\r\n        const handleUserFound = (user) => {\r\n          if (user.resultsFound) {\r\n            setUserData(user.result);\r\n          } else {\r\n            throw new Error(\"User not found\");\r\n          }\r\n        };\r\n\r\n        const { _id: id } = jwt_decode(\r\n          localStorage.getItem(\"token\"),\r\n          handleUserFound\r\n        );\r\n        fetchUser({ url: `/api/users/${id}` }, handleUserFound);\r\n      }\r\n    };\r\n    fetchUserData();\r\n  }, [fetchUser]);\r\n\r\n  let showShippingInfo;\r\n  if (userData.address) {\r\n    setUserAddress(userData.address);\r\n    showShippingInfo = (\r\n      <div>\r\n        <p className=\"font-bold\">{`${userData.name} ${userData.surname}`}</p>\r\n        <div>\r\n          <p>{userData.address.street}</p>\r\n          <p>{`${userData.address.zip}, ${userData.address.province}, ${userData.address.city}`}</p>\r\n          {/* <p>{userData.address.zip}</p> */}\r\n        </div>\r\n        <Link\r\n          to=\"/profile\"\r\n          className=\"flex justify-center w-10/12 mx-auto px-10 py-3 mt-6 font-medium text-white uppercase bg-green-600 rounded-md shadow item-center hover:bg-green-700 focus:shadow-outline focus:outline-none\"\r\n        >\r\n          Change address\r\n        </Link>\r\n      </div>\r\n    );\r\n  } else if (localStorage.getItem(\"token\")) {\r\n    showShippingInfo = (\r\n      <div>\r\n        <p>Provide an address to proceed with payment.</p>\r\n        <Link\r\n          to=\"/profile\"\r\n          className=\"flex justify-center w-10/12 mx-auto px-10 py-3 mt-6 font-medium text-white uppercase bg-green-600 rounded-md shadow item-center hover:bg-green-700 focus:shadow-outline focus:outline-none\"\r\n        >\r\n          Add address\r\n        </Link>\r\n      </div>\r\n    );\r\n  } else {\r\n    showShippingInfo = (\r\n      <div>\r\n        <p>Create an account to complete your order.</p>\r\n        <Link\r\n          to=\"/signin\"\r\n          className=\"flex justify-center w-10/12 mx-auto px-10 py-3 mt-6 font-medium text-white uppercase bg-green-600 rounded-md shadow item-center hover:bg-green-700 focus:shadow-outline focus:outline-none\"\r\n        >\r\n          Create account\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"lg:px-6 mx-0 md:mx-6\">\r\n        {items.length === 0 && <NothingFound />}\r\n        {items.length !== 0 && (\r\n          <>\r\n            <CartTable />\r\n            <div className=\"my-4 mt-6 -mx-2\">\r\n              <div className=\"lg:px-2\">\r\n                <div className=\"p-4 w-11/12 md:w-full mx-auto bg-yellow-200 rounded-full\">\r\n                  <h2 className=\"ml-2 font-bold uppercase\">Shipping info</h2>\r\n                </div>\r\n                <div className=\"p-4\">{showShippingInfo}</div>\r\n              </div>\r\n              <div className=\"lg:px-2 mt-4\">\r\n                <div className=\"p-4 w-11/12 md:w-full mx-auto bg-yellow-200 rounded-full\">\r\n                  <h1 className=\"ml-2 font-bold uppercase\">Order Details</h1>\r\n                </div>\r\n                <div className=\"p-4\">\r\n                  <div className=\"flex justify-between pt-4 border-b\">\r\n                    <div className=\"lg:px-4 lg:py-2 m-2 text-lg lg:text-xl font-bold text-center text-gray-800\">\r\n                      Total\r\n                    </div>\r\n                    <div className=\"lg:px-4 lg:py-2 m-2 lg:text-lg font-bold text-center text-gray-900\">\r\n                      {`${totalPrice.toFixed(2)} €`}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <Link\r\n                      to={userData.address ? \"/checkout\" : \"/cart\"}\r\n                      className={`${\r\n                        userData.address\r\n                          ? \"bg-green-600  hover:bg-green-700\"\r\n                          : \"bg-gray-400 cursor-default\"\r\n                      } flex justify-center w-10/12 mx-auto px-10 py-3 mt-6 font-medium text-white uppercasrounded-md shadow item-center  focus:shadow-outline focus:outline-none`}\r\n                    >\r\n                      <svg\r\n                        aria-hidden=\"true\"\r\n                        data-prefix=\"far\"\r\n                        data-icon=\"credit-card\"\r\n                        className=\"w-6\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        viewBox=\"0 0 576 512\"\r\n                      >\r\n                        <path\r\n                          fill=\"currentColor\"\r\n                          d=\"M527.9 32H48.1C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48.1 48h479.8c26.6 0 48.1-21.5 48.1-48V80c0-26.5-21.5-48-48.1-48zM54.1 80h467.8c3.3 0 6 2.7 6 6v42H48.1V86c0-3.3 2.7-6 6-6zm467.8 352H54.1c-3.3 0-6-2.7-6-6V256h479.8v170c0 3.3-2.7 6-6 6zM192 332v40c0 6.6-5.4 12-12 12h-72c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12zm192 0v40c0 6.6-5.4 12-12 12H236c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12z\"\r\n                        />\r\n                      </svg>\r\n                      <span className=\"ml-2 mt-5px\">Checkout</span>\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ShoppingCart;\r\n"],"sourceRoot":""}
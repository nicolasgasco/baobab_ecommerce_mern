(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{61:function(e,t,n){e.exports={root:"CheckoutForm_root__1EsRl",form:"CheckoutForm_form__1STSy",input:"CheckoutForm_input__wcA4t","result-message":"CheckoutForm_result-message__1x9OH",hidden:"CheckoutForm_hidden__1YS0o","card-error":"CheckoutForm_card-error__1Msw_","card-element":"CheckoutForm_card-element__3JPdK","payment-request-button":"CheckoutForm_payment-request-button__3Moir",button:"CheckoutForm_button__TkFTp",spinner:"CheckoutForm_spinner__tkQtG",loading:"CheckoutForm_loading__2ae-_"}},63:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var r=n(8),a=n.n(r),c=n(17),o=n(2),s=n(0),i=n(39),l=n(16),u=n(61),m=n.n(u),d=n(6),b=n(15),p=n(4),j=n(14),h=n(1);function f(){var e=Object(s.useContext)(b.a),t=e.items,n=e.saveOrder,r=e.userAddress,u=Object(p.g)(),f=Object(s.useState)(!1),_=Object(o.a)(f,2),x=_[0],O=_[1],g=Object(s.useState)(null),v=Object(o.a)(g,2),k=v[0],y=v[1],w=Object(s.useState)(""),C=Object(o.a)(w,2),S=C[0],F=C[1],N=Object(s.useState)(!0),E=Object(o.a)(N,2),P=E[0],T=E[1],q=Object(s.useState)(""),A=Object(o.a)(q,2),J=A[0],M=A[1],R=Object(i.useStripe)(),D=Object(i.useElements)(),z=Object(j.a)().sendRequest;Object(s.useEffect)((function(){z({url:"/api/order/payment",method:"POST",headers:{"Content-Type":"application/json"},body:{items:t}},(function(e){M(e.clientSecret)}),(function(){F(!1)}))}),[t,z]);var G=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.empty),y(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(c.a)(a.a.mark((function e(c){var o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),F(!0),e.next=4,R.confirmCardPayment(J,{payment_method:{card:D.getElement(i.CardElement)}});case 4:(o=e.sent).error?(y("Payment failed ".concat(o.error.message)),F(!1)):(s=Object(l.a)(localStorage.getItem("token"))._id,n(s,t,r),y(null),F(!1),O(!0),u.push("/success"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"w-full mx-auto",style:{maxWidth:"600px"},children:[Object(h.jsx)("div",{className:"w-full pt-1 pb-5",children:Object(h.jsx)("div",{className:"bg-yellow-500 text-white overflow-hidden rounded-full w-20 h-20 -mt-16 mx-auto shadow-lg flex justify-center items-center",children:Object(h.jsx)(d.a,{className:"w-2/3"})})}),Object(h.jsx)("div",{className:"mb-10",children:Object(h.jsx)("h2",{className:"text-center font-bold text-xl uppercase",children:"Secure payment info"})}),Object(h.jsxs)("form",{onSubmit:H,className:"w-full",children:[Object(h.jsx)(i.CardElement,{className:"".concat(m.a.input),options:{style:{base:{color:"black",fontFamily:"Roboto, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"black"}},invalid:{color:"#EF4444",iconColor:"#EF4444"}}},onChange:G}),Object(h.jsx)("button",{disabled:S||P||x,className:"".concat(m.a.submit," ").concat(m.a.button),children:Object(h.jsx)("span",{className:m.a["button-text"],children:S?Object(h.jsx)("div",{className:m.a.spinner,id:"spinner"}):"Pay now"})}),Object(h.jsx)("div",{className:"".concat(!k&&"invisible"," card-error text-center text-red-600 font-bold mt-2"),role:"alert",children:k||"No error"})]}),Object(h.jsx)("div",{className:"px- mt-6 flex justify-end",children:Object(h.jsx)("img",{src:"https://res.cloudinary.com/ngasco/image/upload/v1623952029/bonsai_background/logo-stripe_ouoag3.png",alt:"Logos of Visa, MasterCard, American Express, and Discover",className:"w-1/3"})})]})}}}]);
//# sourceMappingURL=3.1f550e14.chunk.js.map